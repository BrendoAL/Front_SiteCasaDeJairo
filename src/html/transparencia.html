<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Transparência - ONG Casa de Jairo</title>
  <link rel="stylesheet" href="../css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
</head>
<body>

<header class="topo">
  <div class="container">
    <div class="topo-titulo">
      <a href="index.html"><img class="topo-logo" src="/src/imagens/LogoCasaDeJairo.jpg" alt="Logo Casa de Jairo" /></a>
    </div>
    <nav>
      <a href="index.html" class="topo-link">Quem Somos</a>
      <a href="doacao.html" class="topo-link">Como Ajudar</a>
      <a href="eventos.html" class="topo-link">Notícias e Eventos</a>
      <a href="transparencia.html" class="topo-link topo-link-ativo">Transparência</a>
      <a href="#contato" class="topo-link">Contato</a>
      <a href="doacao.html" class="button-amarelo button-doacao">Doe Agora</a>
    </nav>
  </div>
</header>

<main class="container">
  <h1>Transparência Financeira</h1>
  <p>Aqui você pode acompanhar os gastos e ganhos da ONG Casa de Jairo, com total transparência.</p>

  <section id="posts-container">
    <!-- Os posts serão inseridos aqui via JS -->
    <p>Carregando posts...</p>
  </section>
</main>

<footer class="footer">
  <div class="container">
    <p>&copy; 2025 ONG Casa de Jairo. Todos os direitos reservados.</p>
  </div>
</footer>

<script>
  const postsContainer = document.getElementById('posts-container');

  async function carregarPosts() {
    try {
      // Aqui a URL deve apontar para o seu backend real
      const response = await fetch('/api/admin/posts');
      
      if (!response.ok) {
        throw new Error('Erro ao carregar posts');
      }

      const posts = await response.json();

      if (!posts.length) {
        postsContainer.innerHTML = '<p>Nenhum post disponível no momento.</p>';
        return;
      }

      postsContainer.innerHTML = ''; // limpa o "carregando"

      posts.forEach(post => {
        const postEl = document.createElement('article');
        postEl.classList.add('post');

        postEl.innerHTML = `
          <h2 class="post-title">${post.titulo}</h2>
          <p class="post-content">${post.conteudo}</p>
          ${post.imagem ? `<img src="${post.imagem}" alt="Imagem do post ${post.titulo}">` : ''}
        `;

        postsContainer.appendChild(postEl);
      });
    } catch (error) {
      postsContainer.innerHTML = `<p>Erro ao carregar posts: ${error.message}</p>`;
    }
  }

  carregarPosts();
</script>

</body>
</html>
