<!-- CONTEÚDO -->
<main>
    <section class="box-visao-geral">
        <div class="box-visao-geral-titulo container">
            <br>
            <h1 class="titulo-centro">Notícias e Eventos</h1>
            <p class="p-centro">Confira os últimos acontecimentos e ações realizadas pela Casa de Jairo.</p>
        </div>
    </section>

    <!-- SLIDER IMAGENS -->
    <section class="slider-eventos">
        <div class="slider-track">
            <img src="assets/imagens/arte.jpg" alt="Oficina de Artes">
            <img src="assets/imagens/alimentos.jpg" alt="Campanha de Alimentos">
            <img src="assets/imagens/informatica.jpg" alt="Curso de Informática">
            <img src="assets/imagens/brinquedos.jpg" alt="Brinquedos">
            <img src="assets/imagens/cozinha.jpg" alt="Cozinha">
            <!-- repete as imagens para o loop contínuo -->
            <img src="assets/imagens/arte.jpg" alt="Oficina de Artes">
            <img src="assets/imagens/alimentos.jpg" alt="Campanha de Alimentos">
            <img src="assets/imagens/informatica.jpg" alt="Curso de Informática">
            <img src="assets/imagens/brinquedos.jpg" alt="Brinquedos">
            <img src="assets/imagens/cozinha.jpg" alt="Cozinha">
        </div>
    </section>

    <!-- NOTÍCIAS (GRID) -->
    <section class="secao">
        <div class="container">
            <h2 class="titulo-centro"><i class="fa-regular fa-newspaper"></i> Últimas Notícias</h2>

            <!-- Mensagem quando não há eventos -->
            <div *ngIf="eventos.length === 0" class="no-eventos">
                <p>Nenhum evento cadastrado no momento.</p>
            </div>

            <!-- Grid de eventos -->
            <div *ngIf="eventos.length > 0" class="eventos-container">
                <article *ngFor="let e of eventos" class="evento-card">
                    <figure class="thumb">
                        <img 
                            [src]="getImageUrl(e)" 
                            [alt]="e.titulo" 
                            loading="lazy"
                            (error)="onImageError($event)">
                    </figure>
                    <div class="conteudo">
                        <small>{{ e.data | date:'dd/MM/yyyy' }}</small>
                        <h3>{{ e.titulo }}</h3>
                        <p>{{ truncateDescription(e.descricao, 100) }}</p>
                        <button class="button-amarelo" (click)="abrirPopup(e)">Leia mais</button>
                    </div>
                </article>
            </div>

            <!-- Botão VER TODAS AS NOTÍCIAS -->
            <div class="btn-centro" *ngIf="eventos.length > 0">
                <button class="button-azul" id="btn-ver-mais">VER TODAS AS NOTÍCIAS</button>
            </div>
        </div>
    </section>

    <!-- POPUP MODAL -->
    <div *ngIf="eventoSelecionado" class="popup-overlay" (click)="fecharPopup()">
        <div class="popup-content" (click)="$event.stopPropagation()">
            <button class="popup-close" (click)="fecharPopup()">&times;</button>
            
            <div class="popup-header">
                <img 
                    [src]="getImageUrl(eventoSelecionado)" 
                    [alt]="eventoSelecionado.titulo"
                    class="popup-image">
            </div>
            
            <div class="popup-body">
                <small class="popup-date">{{ eventoSelecionado.data | date:'dd/MM/yyyy' }}</small>
                <h2>{{ eventoSelecionado.titulo }}</h2>
                <p class="popup-local">
                    <i class="fa fa-map-marker"></i> {{ eventoSelecionado.local }}
                </p>
                <div class="popup-description">
                    {{ eventoSelecionado.descricao }}
                </div>
            </div>
        </div>
    </div>
</main>
